From 69c3921b73571e0d5cc10ceb4a0d677ee99e165d Mon Sep 17 00:00:00 2001
From: Marek 'marx' Grac <mgrac@redhat.com>
Date: Wed, 18 Feb 2015 14:24:22 +0100
Subject: [PATCH 09/16] Revert "COMPATIBILITY BREAK: fence_lpar replace --n /
 --partition / partition with standard -n / --plug / port"

---
 fence/agents/lpar/fence_lpar.py | 14 ++++++++++++--
 1 file changed, 12 insertions(+), 2 deletions(-)

diff --git a/fence/agents/lpar/fence_lpar.py b/fence/agents/lpar/fence_lpar.py
index caa7d38..7cd012d 100644
--- a/fence/agents/lpar/fence_lpar.py
+++ b/fence/agents/lpar/fence_lpar.py
@@ -120,10 +120,17 @@ def define_new_opts():
 		"default" : "4",
 		"choices" : ["3", "4"],
 		"order" : 1}
+	all_opt["partition"] = {
+		"getopt" : ":",
+		"longopt" : "partition",
+		"help" : "--partition <id>               Name of the partition",
+		"required" : "0",
+		"shortdesc" : "Partition name",
+		"order" : 1 }
 
 def main():
 	device_opt = ["ipaddr", "login", "passwd", "secure", "cmd_prompt", \
-	                "port", "managed", "hmc_version"]
+	                "port", "partition", "managed", "hmc_version"]
 
 	atexit.register(atexit_handler)
 
@@ -133,7 +140,10 @@ def main():
 	all_opt["secure"]["default"] = "1"
 	all_opt["cmd_prompt"]["default"] = [r":~>", r"]\$", r"\$ "]
 
-	options = check_input(device_opt, process_input(device_opt))
+	opt = process_input(device_opt)
+	if opt.has_key("--partition"):
+		opt["--plug"] = opt["--partition"]
+	options = check_input(device_opt, opt)
 
 	docs = {}
 	docs["shortdesc"] = "Fence agent for IBM LPAR"
-- 
1.9.3

