From 9749f9fc9f3f1c53275e7e1c187d5e54033c8df3 Mon Sep 17 00:00:00 2001
From: Marek 'marx' Grac <mgrac@redhat.com>
Date: Thu, 27 Aug 2015 13:30:32 +0200
Subject: [PATCH 4/6] fencing: Password was awaited twice in some cases when
 connecting via telnet

Resolves: rhbz#1247062
---
 fence/agents/lib/fencing.py.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/fence/agents/lib/fencing.py.py b/fence/agents/lib/fencing.py.py
index 8bafcce..f41aab8 100644
--- a/fence/agents/lib/fencing.py.py
+++ b/fence/agents/lib/fencing.py.py
@@ -1054,7 +1054,7 @@ def _login_telnet(options, re_login_string):
 		options["eol"] = "\n"
 		conn.send_eol(options["--username"])
 		conn.log_expect(re_pass, int(options["--login-timeout"]))
-	elif re_pass.search(screen) != None:
+	elif re_pass.search(screen) == None:
 		conn.log_expect(re_pass, int(options["--shell-timeout"]))
 
 	try:
-- 
1.9.3

